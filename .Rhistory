)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 10,
color = df[ ,shooting_var],
colors = brewer.pal(n = 3, name = "Reds"),
text = paste0(df$name, ", ", df$age, "
", df$streetaddress, " ", df$city, ", ", df$state, "
", df$month, " ", df$day)
, marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "Total # of Deaths and Injuries") %>%
layout(title = "2018 US Mass Shootings", geo = g)
}
build_map(df, df$gender)
build_map(df, df$gender)
build_map(df, df$gender)
build_map(killings_data, df$gender)
library(dplyr)
library(ggplot2)
library(plotly)
library(RColorBrewer)
library(stringr)
killings_data <- read.csv("police_killings.csv", stringsAsFactors = F)
build_map <- function(data, shooting_var) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 10,
color = color_eq,
colors = brewer.pal(n = 3, name = "Reds"),
text = paste0(df$name, ", ", df$age, "
", df$streetaddress, " ", df$city, ", ", df$state, "
", df$month, " ", df$day)
, marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "Total # of Deaths and Injuries") %>%
layout(title = "2018 US Mass Shootings", geo = g)
}
build_map(killings_data, df$gender)
build_map <- function(data) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 10,
color = "blue",
#colors = brewer.pal(n = 3, name = "Reds"),
text = paste0(df$name, ", ", df$age, "
", df$streetaddress, " ", df$city, ", ", df$state, "
", df$month, " ", df$day)
, marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "") %>%
layout(title = "", geo = g)
}
build_map(killings_data)
killings_data <- read.csv("police_killings.csv", stringsAsFactors = F)
build_map <- function(data) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 10,
color = "blue",
#colors = brewer.pal(n = 3, name = "Reds"),
text = paste0(df$name, ", ", df$age, "
", df$streetaddress, " ", df$city, ", ", df$state, "
", df$month, " ", df$day)
, marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "") %>%
layout(title = "", geo = g)
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 10,
color = "blue",
#colors = brewer.pal(n = 3, name = "Reds"),
text = paste0(df$name, ", ", df$age, "
", df$streetaddress, " ", df$city, ", ", df$state, "
", df$month, " ", df$day)
, marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "") %>%
layout(title = "", geo = g)
}
build_map(killings_data)
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 10,
color = "blue",
#colors = brewer.pal(n = 3, name = "Reds"),
text = paste(df$name, ",", df$age, "
", df$streetaddress, df$city, ",", df$state, "
", df$month, df$day)
, marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "") %>%
layout(title = "", geo = g)
}
build_map(killings_data)
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 10,
color = "blue",
#colors = brewer.pal(n = 3, name = "Reds"),
text = paste(df$name, ",", df$age, df$streetaddress, df$city, ",", df$state
, df$month, df$day)
, marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "") %>%
layout(title = "", geo = g)
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 10,
color = "blue",
#colors = brewer.pal(n = 3, name = "Reds"),
text = paste(df$name, ",", df$age, df$streetaddress, df$city, ",", df$state
, df$month, df$day)
, marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "hi", geo = g)
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 10,
color = "blue",
#colors = brewer.pal(n = 3, name = "Reds"),
text = paste(df$name, ",", df$age, df$streetaddress, df$city, ",", df$state
, df$month, df$day)
, marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "hi", geo = g)
p
}
build_map(killings_data)
killings_data <- read.csv("police_killings.csv", stringsAsFactors = F)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 10,
fill = "blue",
#text = paste(df$name, ",", df$age, df$streetaddress, df$city, ",", df$state
#, df$month, df$day),
marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "hi", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude, size = 5,
fill = "blue",
#text = paste(df$name, ",", df$age, df$streetaddress, df$city, ",", df$state
#, df$month, df$day),
marker = list(
size = 15,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "hi", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
#text = paste(df$name, ",", df$age, df$streetaddress, df$city, ",", df$state
#, df$month, df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "hi", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
text = paste(df$name, df$age, df$streetaddress, df$city, df$state, df$month, df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "hi", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
# = paste(df$name, df$age, df$streetaddress, df$city, df$state, df$month, df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "hi", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
text = df$name,
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "hi", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
#color_eq <- paste0("df$", shooting_var)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
hovertext = df$name,
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "hi", geo = g)
p
}
build_map(killings_data)
library(dplyr)
library(ggplot2)
library(plotly)
library(RColorBrewer)
library(stringr)
killings_data <- read.csv("police_killings.csv", stringsAsFactors = F)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
#hovertext = df$name,
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "hi", geo = g)
p
}
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
killings_data <- read.csv("police_killings.csv", stringsAsFactors = F)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
#hovertext = df$name,
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
runApp()
runApp()
runApp()
runApp()

install.packages("dplyr")
shiny::runApp('Documents/info201-group-project')
build_map(killings_data)
library(dplyr)
library(ggplot2)
library(plotly)
library(RColorBrewer)
library(stringr)
killings_data <- read.csv("police_killings.csv", stringsAsFactors = F)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
#hovertext = df$name,
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
setwd("~/Documents/info201-group-project")
killings_data <- read.csv("police_killings.csv", stringsAsFactors = F)
build_map(killings_data)
runApp()
df <- read.csv("police_killings.csv", stringsAsFactors = F)
runApp()
library(dplyr)
df <- read.csv("police_killings.csv", stringsAsFactors = F)
shinyServer(function(input, output) {
# Render a plotly object that returns your map
output$map <- renderPlotly({
return(build_map(df))
})
})
library(shiny)
library(plotly)
library(shinythemes)
shinyUI(navbarPage(theme = shinytheme("paper"),
"Who Police Killed and Where in 2015",
tags$h3("In 2015..."),
tags$p("Police killed 467 Americans. Some came from opulent backgrounds,
others from places historically under the poverty line. Some were students, parents, or employees. Some were young, old, or somewhere
in between. Some were armed and some were not.
What each of them will not be is forgotten. Using data from the statistical website fivethirtyeight that merged the Guardian's data on police killings
in 2015 with Census data, each victim will not be just a point. Each victim will
be a part of a bigger puzzle, to try to find clarity and make sense of the devastating killings that have occured. By exploring and representation facets of the victim's
background and the demographics surrounding the location of the killing, we hope that
the relationships between these factors will reveal themselves."),
# Create a tab panel for your map
tabPanel(
"Map",
# Create sidebar layout
sidebarLayout(
# Side panel for controls
sidebarPanel(
tags$h3("All Police Killings in 2015"),
tags$h6("Hover for more details about each specific killing."),
# Input to select variable to map
selectInput(
"shooting_var",
label = "Variable to Color Each Point",
choices = list(
"Race/Ethnicity" = "raceethnicity",
"Gender" = "gender",
"Cause of Death" = "cause"
)
)
),
# Main panel: display plotly map
mainPanel(
plotlyOutput("Map"),
#tags$link(rel = "stylesheet", type = "text/css", href = "style.css"),
#tags$div(class = "summary", checked = NA,
tags$p("This map shows each killing at the hands of police in 2015. The selected
variable will affect the color of each point representing each killing with the
legend provided to the right.")
)
)
),
tabPanel("other",
tags$h1("Filler page")
)
# Create a tabPanel to show your scatter plot
))
runApp()
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
text = df$name,
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
hoverinfo = "text",
text = df$name,
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
text = paste0(df$name),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
View(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
hoverinfo = 'text',
text = ~paste(df$name),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
Sys.setlocale(category = "LC_ALL", locale = "C")
build_map(killings_data)
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
text = df$name,
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
text = paste0(df$name, "
", df$city, df$state, "
", df$month, " ", df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = "blue",
text = paste0(df$name, "
", df$city, ", ",df$state, "
", df$month, " ", df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
runApp()
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = df$raceethnicity,
text = paste0(df$name, "
", df$city, ", ",df$state, "
", df$month, " ", df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = factor(df$raceethnicity),
text = paste0(df$name, "
", df$city, ", ",df$state, "
", df$month, " ", df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
data(killings_data)
killings_data$raceethnicity <- factor(killings_data$raceethnicity,
levels = c("Black", "White", "Hispanic/Latino",
"Asian/Pacific Islander"), labels = c("red", "blue", "green", "black"))
killings_data$gender <- factor(killings_data$gender,
levels = c("Male", "Female"),
labels = c("red", "blue"))
killings_data$raceethnicity <- factor(killings_data$raceethnicity,
levels = c("Black", "White", "Hispanic/Latino",
"Asian/Pacific Islander"), labels = c("red", "blue", "green", "black"))
killings_data$gender <- factor(killings_data$gender,
levels = c("Male", "Female"),
labels = c("red", "blue"))
killings_data$cause <- factor(killings_data$cause,
levels = c("Gunshot", "Taser", "Death in custody", "Struck by vehicle"),
labels = c("red", "blue", "green", "black"))
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
fill = ~I(df$raceethnicity),
text = paste0(df$name, "
", df$city, ", ",df$state, "
", df$month, " ", df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
Sys.setlocale(category = "LC_ALL", locale = "C")
killings_data <- read.csv("police_killings.csv", stringsAsFactors = F)
killings_data$raceethnicity <- factor(killings_data$raceethnicity,
levels = c("Black", "White", "Hispanic/Latino",
"Asian/Pacific Islander"), labels = c("red", "blue", "green", "black"))
killings_data$gender <- factor(killings_data$gender,
levels = c("Male", "Female"),
labels = c("red", "blue"))
killings_data$cause <- factor(killings_data$cause,
levels = c("Gunshot", "Taser", "Death in custody", "Struck by vehicle"),
labels = c("red", "blue", "green", "black"))
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
color = ~I(df$raceethnicity),
text = paste0(df$name, "
", df$city, ", ",df$state, "
", df$month, " ", df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
killings_data$raceethnicity <- factor(killings_data$raceethnicity,
levels = c("Black", "White", "Hispanic/Latino",
"Asian/Pacific Islander"), labels = c(1, 2, 3, 4))
build_map(killings_data)
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
color = df$raceethnicity,
text = paste0(df$name, "
", df$city, ", ",df$state, "
", df$month, " ", df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
build_map(killings_data)
killings_data <- read.csv("police_killings.csv", stringsAsFactors = F)
killings_data$raceethnicity <- factor(killings_data$raceethnicity,
levels = c("Black", "White", "Hispanic/Latino",
"Asian/Pacific Islander"), labels = c("red", "blue", "green", "black"))
killings_data$gender <- factor(killings_data$gender,
levels = c("Male", "Female"),
labels = c("red", "blue"))
killings_data$cause <- factor(killings_data$cause,
levels = c("Gunshot", "Taser", "Death in custody", "Struck by vehicle"),
labels = c("red", "blue", "green", "black"))
build_map <- function(df) {
g <- list(
scope = "usa",
projection = list(type = "albers usa"),
showland = TRUE,
landcolor = toRGB("gray85"),
subunitwidth = 1,
countrywidth = 1,
subunitcolor = toRGB("white"),
countrycolor = toRGB("white")
)
p <- plot_geo(df, locationmode = "USA-states") %>%
add_markers(
x = df$longitude, y = df$latitude,
color = ~I(df$raceethnicity),
text = paste0(df$name, "
", df$city, ", ",df$state, "
", df$month, " ", df$day),
marker = list(
size = 5,
mode = "markers"
)) %>%
colorbar(title = "hi") %>%
layout(title = "Police Killings in 2015", geo = g)
p
}
build_map(killings_data)
runApp()
